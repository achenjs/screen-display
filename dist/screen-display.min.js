!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ScreenDisplay=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){return"object"==typeof e?null!==e:"function"==typeof e}function n(e){if(!r(e))throw TypeError(e+" is not an object!");return e}function c(e,t){return f.call(e,t)}function i(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+v).toString(36))}function d(n,r,e){if(!function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(n),void 0===r)return n;switch(e){case 1:return function(e){return n.call(r,e)};case 2:return function(e,t){return n.call(r,e,t)};case 3:return function(e,t,i){return n.call(r,e,t,i)}}return function(){return n.apply(r,arguments)}}var p=e(function(e){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=e(function(e){e=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)}),t=(g.version,function(e){try{return!!e()}catch(e){return!0}}),l=!t(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),o=p.document,s=r(o)&&r(o.createElement),a=!l&&!t(function(){return 7!=Object.defineProperty(s?o.createElement("div"):{},"a",{get:function(){return 7}}).a}),u=Object.defineProperty,h={f:l?Object.defineProperty:function(e,t,i){if(n(e),t=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t,!0),n(i),a)try{return u(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},y=l?function(e,t,i){return h.f(e,t,{enumerable:!((t=1)&t),configurable:!(2&t),writable:!(4&t),value:i})}:function(e,t,i){return e[t]=i,e},f={}.hasOwnProperty,_=0,v=Math.random(),m=e(function(e){var t="__core-js_shared__",i=p[t]||(p[t]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),b=m("native-function-to-string",Function.toString),z=e(function(e){var o=i("src"),t="toString",s=(""+b).split(t);g.inspectSource=function(e){return b.call(e)},(e.exports=function(e,t,i,n){var r="function"==typeof i;r&&(c(i,"name")||y(i,"name",t)),e[t]!==i&&(r&&(c(i,o)||y(i,o,e[t]?""+e[t]:s.join(String(t)))),e===p?e[t]=i:n?e[t]?e[t]=i:y(e,t,i):(delete e[t],y(e,t,i)))})(Function.prototype,t,function(){return"function"==typeof this&&this[o]||b.call(this)})}),T="prototype",H=function(e,t,i){var n,r,o,s=e&H.F,c=e&H.G,a=e&H.S,u=e&H.P,h=e&H.B,l=c?p:a?p[t]||(p[t]={}):(p[t]||{})[T],f=c?g:g[t]||(g[t]={}),_=f[T]||(f[T]={});for(n in c&&(i=t),i)r=((o=!s&&l&&void 0!==l[n])?l:i)[n],o=h&&o?d(r,p):u&&"function"==typeof r?d(Function.call,r):r,l&&z(l,n,r,e&H.U),f[n]!=r&&y(f,n,o),u&&_[n]!=r&&(_[n]=r)};p.core=g,H.F=1,H.G=2,H.S=4,H.P=8,H.B=16,H.W=32,H.U=64,H.R=128;function x(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}function E(e){return k(x(e))}function S(e){return isNaN(e=+e)?0:(0<e?R:P)(e)}var j,W,w=H,O={}.toString,k=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==(t=e,O.call(t).slice(8,-1))?e.split(""):Object(e);var t},P=Math.ceil,R=Math.floor,L=Math.min,M=Math.max,$=Math.min,F=m("keys"),B=(j=!1,function(e,t,i){var n,r=E(e),o=0<(e=r.length)?L(S(e),9007199254740991):0,s=(e=o,(i=S(i=i))<0?M(i+e,0):$(i,e));if(j&&t!=t){for(;s<o;)if((n=r[s++])!=n)return!0}else for(;s<o;s++)if((j||s in r)&&r[s]===t)return j||s||0;return!j&&-1}),C=F[W="IE_PROTO"]||(F[W]=i(W)),N="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),D=Object.keys||function(e){return function(e,t){var i,n=E(e),r=0,o=[];for(i in n)i!=C&&c(n,i)&&o.push(i);for(;t.length>r;)c(n,i=t[r++])&&(~B(o,i)||o.push(i));return o}(e,N)},U={f:Object.getOwnPropertySymbols},I={f:{}.propertyIsEnumerable},V=Object.assign,t=!V||t(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=V({},e)[i]||Object.keys(V({},t)).join("")!=n})?function(e){for(var t=Object(x(e)),i=arguments.length,n=1,r=U.f,o=I.f;n<i;)for(var s,c=k(arguments[n++]),a=r?D(c).concat(r(c)):D(c),u=a.length,h=0;h<u;)s=a[h++],l&&!o.call(c,s)||(t[s]=c[s]);return t}:V;w(w.S+w.F,"Object",{assign:t});var q=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function A(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(e,t,i){return t&&A(e.prototype,t),i&&A(e,i),e},G=e(function(t){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(e){return typeof e}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}t.exports=i}),J=function(e){return t=e,("object"===("undefined"==typeof HTMLElement?"undefined":G(HTMLElement))?t instanceof HTMLElement:!(!t||"object"!==G(t)||1!==t.nodeType&&9!==t.nodeType||"string"!=typeof t.nodeName))?e:document.querySelector(e);var t},K=function(e){return e.parentNode},Q={_handleResize:function(e){var t=(e.target||e.srcElement).__resizeTrigger__;if(t){var i=t.__z_resizeListeners;if(i)for(var n=i.length,r=0;r<n;r++){var o=i[r],s=o.handler,o=o.context;s.apply(o,[e])}}},_removeHandler:function(e,t,i){var n=e.__z_resizeListeners;if(n)for(var r=n.length,o=0;o<r;o++){var s=n[o];if(s.handler===t&&s.context===i)return void n.splice(o,1)}},_createResizeTrigger:function(e){var t=document.createElement("object");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden;opacity: 0; pointer-events: none; z-index: -1;"),t.onload=Q._handleObjectLoad,t.type="text/html",e.appendChild(t),t.data="about:blank",t},_handleObjectLoad:function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",Q._handleResize)}};document.attachEvent?(Q.on=function(e,t,i){var n=e.__z_resizeListeners;n||(n=[],e.__z_resizeListeners=n,(e.__resizeTrigger__=e).attachEvent("onresize",Q._handleResize)),n.push({handler:t,context:i})},Q.off=function(e,t,i){var n=e.__z_resizeListeners;n&&(Q._removeHandler(e,t,i),0===n.length&&(e.detachEvent("onresize",Q._handleResize),delete e.__z_resizeListeners))}):(Q.on=function(e,t,i){var n,r=e.__z_resizeListeners;r||(r=[],e.__z_resizeListeners=r,"static"===getComputedStyle(e,null).position&&(e.style.position="relative"),n=Q._createResizeTrigger(e),(e.__resizeTrigger__=n).__resizeElement__=e),r.push({handler:t,context:i})},Q.off=function(e,t,i){var n=e.__z_resizeListeners;n&&(Q._removeHandler(e,t,i),0===n.length&&((n=e.__resizeTrigger__)&&(n.contentDocument.defaultView.removeEventListener("resize",Q._handleResize),e.removeChild(n),delete e.__resizeTrigger__),delete e.__z_resizeListeners))});var X={designWidth:1920,designHeight:1080,compatPosition:"center-center",resizeTimer:300,disabledResize:!1};function Y(e){if(q(this,Y),this.$options=e,this.$el=J(e.el),!this.$el)return console.error("请配置好需要适配的dom节点到el参数上");this.$parent=K(this.$el),this.designWidth=e.designWidth||X.designWidth,this.designHeight=e.designHeight||X.designHeight,this.compatPosition=e.compatPosition||X.compatPosition,this.resizeTimer=e.resizeTimer||X.resizeTimer,this.disabledResize=e.disabledResize||X.disabledResize,this._diffUnit=0,this._pWidth=0,this._pHeight=0,this._scaling=0,this._translate="0,0",this._resizeTimeout=null,this._bindResizeByEvent(),this._resize()}return t(Y,[{key:"_resize",value:function(){this._calcParentNodeWH(),this._calcScaling(),this._calcTranslate(),this._bindStyleText()}},{key:"_calcParentNodeWH",value:function(){var e,e={offsetWidth:(e=this.$parent).offsetWidth,offsetHeight:e.offsetHeight};this._pWidth=e.offsetWidth,this._pHeight=e.offsetHeight,this._diffUnit=this._pWidth/this._pHeight-this.designWidth/this.designHeight}},{key:"_calcScaling",value:function(){this._scaling=this._pWidth===this.designWidth&&this._pHeight===this.designHeight?1:0<this._diffUnit?this._pHeight/this.designHeight:this._pWidth/this.designWidth}},{key:"_calcTranslate",value:function(){switch(this.compatPosition){case"top-left":this._translate="0,0";break;case"top-center":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/2/this._scaling,"px,0");break;case"top-right":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/this._scaling,"px,0");break;case"bottom-left":this._translate="0,".concat((this._pHeight-this.designHeight*this._scaling)/this._scaling,"px");break;case"center-left":this._translate="0,".concat((this._pHeight-this.designHeight*this._scaling)/2/this._scaling,"px");break;case"center-center":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/2/this._scaling,"px,").concat((this._pHeight-this.designHeight*this._scaling)/2/this._scaling,"px")}}},{key:"_bindStyleText",value:function(){Object.assign(this.$el.style,{"transform-origin":"0 0",transform:"scale(".concat(this._scaling,",").concat(this._scaling,") translate(").concat(this._translate,")"),width:"".concat(this.designWidth,"px"),height:"".concat(this.designHeight,"px")}),this.$options.onResize&&this.$options.onResize(this,{actualWidth:this.designWidth*this._scaling,actualHeight:this.designHeight*this._scaling})}},{key:"_bindResizeByEvent",value:function(){var e=this;this._bind=function(){if(!e.disabledResize){if(-1===e.resizeTimer)return e._resize();e._resizeTimeout&&(clearTimeout(e._resizeTimeout),e._resizeTimeout=null),e._resizeTimeout=setTimeout(function(){e._resize(),e._resizeTimeout=null},e.resizeTimer)}},Q.on(this.$parent,this._bind)}},{key:"_unbindResizeByEvent",value:function(){Q.off(this.$parent)}},{key:"resize",value:function(){this._resize()}},{key:"destroy",value:function(){this._unbindResizeByEvent()}}]),Y});
