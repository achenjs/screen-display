!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ScreenDisplay=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function r(e){return"object"==typeof e?null!==e:"function"==typeof e}function n(e){if(!r(e))throw TypeError(e+" is not an object!");return e}function c(e,t){return f.call(e,t)}function a(e){return"Symbol(".concat(void 0===e?"":e,")_",(++d+v).toString(36))}function _(n,r,e){if(!function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(n),void 0===r)return n;switch(e){case 1:return function(e){return n.call(r,e)};case 2:return function(e,t){return n.call(r,e,t)};case 3:return function(e,t,i){return n.call(r,e,t,i)}}return function(){return n.apply(r,arguments)}}var p=e(function(e){e=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=e(function(e){e=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)}),t=(g.version,function(e){try{return!!e()}catch(e){return!0}}),l=!t(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),i=p.document,s=r(i)&&r(i.createElement),o=!l&&!t(function(){return 7!=Object.defineProperty(s?i.createElement("div"):{},"a",{get:function(){return 7}}).a}),u=Object.defineProperty,h={f:l?Object.defineProperty:function(e,t,i){if(n(e),t=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}(t,!0),n(i),o)try{return u(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},y=l?function(e,t,i){return h.f(e,t,{enumerable:!((t=1)&t),configurable:!(2&t),writable:!(4&t),value:i})}:function(e,t,i){return e[t]=i,e},f={}.hasOwnProperty,d=0,v=Math.random(),m=e(function(e){var t="__core-js_shared__",i=p[t]||(p[t]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),z=m("native-function-to-string",Function.toString),b=e(function(e){var s=a("src"),t="toString",o=(""+z).split(t);g.inspectSource=function(e){return z.call(e)},(e.exports=function(e,t,i,n){var r="function"==typeof i;r&&(c(i,"name")||y(i,"name",t)),e[t]!==i&&(r&&(c(i,s)||y(i,s,e[t]?""+e[t]:o.join(String(t)))),e===p?e[t]=i:n?e[t]?e[t]=i:y(e,t,i):(delete e[t],y(e,t,i)))})(Function.prototype,t,function(){return"function"==typeof this&&this[s]||z.call(this)})}),E="prototype",T=function(e,t,i){var n,r,s,o=e&T.F,c=e&T.G,a=e&T.S,u=e&T.P,h=e&T.B,l=c?p:a?p[t]||(p[t]={}):(p[t]||{})[E],f=c?g:g[t]||(g[t]={}),d=f[E]||(f[E]={});for(n in c&&(i=t),i)r=((s=!o&&l&&void 0!==l[n])?l:i)[n],s=h&&s?_(r,p):u&&"function"==typeof r?_(Function.call,r):r,l&&b(l,n,r,e&T.U),f[n]!=r&&y(f,n,s),u&&d[n]!=r&&(d[n]=r)};p.core=g,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128;function w(e){return O.call(e).slice(8,-1)}function S(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}function x(e){return k(S(e))}function H(e){return isNaN(e=+e)?0:(0<e?R:P)(e)}function j(c){return function(e,t,i){var n,r=x(e),s=0<(e=r.length)?L(H(e),9007199254740991):0,o=(e=s,(i=H(i=i))<0?M(i+e,0):$(i,e));if(c&&t!=t){for(;o<s;)if((n=r[o++])!=n)return!0}else for(;o<s;o++)if((c||o in r)&&r[o]===t)return c||o||0;return!c&&-1}}var W=T,O={}.toString,k=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==w(e)?e.split(""):Object(e)},P=Math.ceil,R=Math.floor,L=Math.min,M=Math.max,$=Math.min,F=e(function(e){var t=m("wks"),i=p.Symbol,n="function"==typeof i;(e.exports=function(e){return t[e]||(t[e]=n&&i[e]||(n?i:a)("Symbol."+e))}).store=t}),B=F("unscopables"),C=Array.prototype;null==C[B]&&y(C,B,{});var N=j(!0);W(W.P,"Array",{includes:function(e,t){return N(this,e,1<arguments.length?t:void 0)}}),C[B].includes=!0;function D(e,t,i){if(r(n=t)&&(void 0!==(t=n[U])?!!t:"RegExp"==w(n)))throw TypeError("String#"+i+" doesn't accept regex!");var n;return String(S(e))}var U=F("match"),A=F("match"),I="includes";W(W.P+W.F*function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[A]=!1,!"/./"[t](i)}catch(e){}}return!0}(I),"String",{includes:function(e,t){return!!~D(this,e,I).indexOf(e,1<arguments.length?t:void 0)}});var V,q=m("keys"),G=j(!1),J=q[V="IE_PROTO"]||(q[V]=a(V)),K="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Q=Object.keys||function(e){return function(e,t){var i,n=x(e),r=0,s=[];for(i in n)i!=J&&c(n,i)&&s.push(i);for(;t.length>r;)c(n,i=t[r++])&&(~G(s,i)||s.push(i));return s}(e,K)},X={f:Object.getOwnPropertySymbols},Y={f:{}.propertyIsEnumerable},Z=Object.assign,t=!Z||t(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";return e[i]=7,n.split("").forEach(function(e){t[e]=e}),7!=Z({},e)[i]||Object.keys(Z({},t)).join("")!=n})?function(e){for(var t=Object(S(e)),i=arguments.length,n=1,r=X.f,s=Y.f;n<i;)for(var o,c=k(arguments[n++]),a=r?Q(c).concat(r(c)):Q(c),u=a.length,h=0;h<u;)o=a[h++],l&&!s.call(c,o)||(t[o]=c[o]);return t}:Z;W(W.S+W.F,"Object",{assign:t});var ee=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function te(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(e,t,i){return t&&te(e.prototype,t),i&&te(e,i),e},ie=e(function(t){function i(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=i=function(e){return typeof e}:t.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}t.exports=i}),ne=function(e){return t=e,("object"===("undefined"==typeof HTMLElement?"undefined":ie(HTMLElement))?t instanceof HTMLElement:!(!t||"object"!==ie(t)||1!==t.nodeType&&9!==t.nodeType||"string"!=typeof t.nodeName))?e:document.querySelector(e);var t},re=function(e){return e.parentNode},se={_handleResize:function(e){var t=(e.target||e.srcElement).__resizeTrigger__;if(t){var i=t.__z_resizeListeners;if(i)for(var n=i.length,r=0;r<n;r++){var s=i[r],o=s.handler,s=s.context;o.apply(s,[e])}}},_removeHandler:function(e,t,i){var n=e.__z_resizeListeners;if(n)for(var r=n.length,s=0;s<r;s++){var o=n[s];if(o.handler===t&&o.context===i)return void n.splice(s,1)}},_createResizeTrigger:function(e){var t=document.createElement("object");return t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden;opacity: 0; pointer-events: none; z-index: -1;"),t.onload=se._handleObjectLoad,t.type="text/html",e.appendChild(t),t.data="about:blank",t},_handleObjectLoad:function(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",se._handleResize)}};document.attachEvent?(se.on=function(e,t,i){var n=e.__z_resizeListeners;n||(n=[],e.__z_resizeListeners=n,(e.__resizeTrigger__=e).attachEvent("onresize",se._handleResize)),n.push({handler:t,context:i})},se.off=function(e,t,i){var n=e.__z_resizeListeners;n&&(se._removeHandler(e,t,i),0===n.length&&(e.detachEvent("onresize",se._handleResize),delete e.__z_resizeListeners))}):(se.on=function(e,t,i){var n,r=e.__z_resizeListeners;r||(r=[],e.__z_resizeListeners=r,"static"===getComputedStyle(e,null).position&&(e.style.position="relative"),n=se._createResizeTrigger(e),(e.__resizeTrigger__=n).__resizeElement__=e),r.push({handler:t,context:i})},se.off=function(e,t,i){var n=e.__z_resizeListeners;n&&(se._removeHandler(e,t,i),0===n.length&&((n=e.__resizeTrigger__)&&(n.contentDocument.defaultView.removeEventListener("resize",se._handleResize),e.removeChild(n),delete e.__resizeTrigger__),delete e.__z_resizeListeners))});var oe={designWidth:1920,designHeight:1080,compatPosition:"center-center",resizeTimer:300,resizeEvent:"window",disabledResize:!1};function ce(e){if(ee(this,ce),this.$options=e,this.$el=ne(e.el),!this.$el)return console.error("请配置好需要适配的dom节点到el参数上");this.$parent=re(this.$el),this.designWidth=e.designWidth||oe.designWidth,this.designHeight=e.designHeight||oe.designHeight,this.compatPosition=e.compatPosition||oe.compatPosition,this.resizeTimer=e.resizeTimer||oe.resizeTimer,this.resizeEvent=e.resizeEvent||oe.resizeEvent,this.disabledResize=e.disabledResize||oe.disabledResize,this._diffUnit=0,this._pWidth=0,this._pHeight=0,this._scaling=0,this._translate="0,0",this._resizeTimeout=null,this._bindResizeByEvent(),this._resize()}return t(ce,[{key:"_resize",value:function(){this._calcParentNodeWH(),this._calcScaling(),this._calcTranslate(),this._bindStyleText()}},{key:"_calcParentNodeWH",value:function(){var e,e={offsetWidth:(e=this.$parent).offsetWidth,offsetHeight:e.offsetHeight};this._pWidth=e.offsetWidth,this._pHeight=e.offsetHeight,this._diffUnit=this._pWidth/this._pHeight-this.designWidth/this.designHeight}},{key:"_calcScaling",value:function(){this._scaling=this._pWidth===this.designWidth&&this._pHeight===this.designHeight?1:0<this._diffUnit?this._pHeight/this.designHeight:this._pWidth/this.designWidth}},{key:"_calcTranslate",value:function(){switch(this.compatPosition){case"top-left":this._translate="0,0";break;case"top-center":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/2/this._scaling,"px,0");break;case"top-right":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/this._scaling,"px,0");break;case"bottom-left":this._translate="0,".concat((this._pHeight-this.designHeight*this._scaling)/this._scaling,"px");break;case"center-left":this._translate="0,".concat((this._pHeight-this.designHeight*this._scaling)/2/this._scaling,"px");break;case"center-center":this._translate="".concat((this._pWidth-this.designWidth*this._scaling)/2/this._scaling,"px,").concat((this._pHeight-this.designHeight*this._scaling)/2/this._scaling,"px")}}},{key:"_bindStyleText",value:function(){Object.assign(this.$el.style,{"transform-origin":"0 0",transform:"scale(".concat(this._scaling,",").concat(this._scaling,") translate(").concat(this._translate,")"),width:"".concat(this.designWidth,"px"),height:"".concat(this.designHeight,"px")}),this.$options.onResize&&this.$options.onResize(this,{actualWidth:this.designWidth*this._scaling,actualHeight:this.designHeight*this._scaling})}},{key:"_bindResizeByEvent",value:function(){var e=this;this._bind=function(){if(!e.disabledResize){if(-1===e.resizeTimer)return e._resize();e._resizeTimeout&&(clearTimeout(e._resizeTimeout),e._resizeTimeout=null),e._resizeTimeout=setTimeout(function(){e._resize(),e._resizeTimeout=null},e.resizeTimer)}},this.resizeEvent.includes("window")&&window.addEventListener("resize",this._bind),this.resizeEvent.includes("parent")&&se.on(this.$parent,this._bind)}},{key:"_unbindResizeByEvent",value:function(){this.resizeEvent.includes("window")&&window.removeEventListener("resize",this._bind),this.resizeEvent.includes("parent")&&se.off(this.$parent)}},{key:"resize",value:function(){this._resize()}},{key:"destroy",value:function(){this._unbindResizeByEvent()}}]),ce});
